# 🎮 扫雷游戏 + AI智能提示

一个内置扫雷游戏并集成AI智能提示的桌面应用程序。

![License](https://img.shields.io/badge/license-MIT-blue.svg)
![Python](https://img.shields.io/badge/python-3.7+-green.svg)
![PySide6](https://img.shields.io/badge/PySide6-Qt6-orange.svg)

## ✨ 核心特性

- 🎮 **完整的扫雷游戏** - 内置经典扫雷游戏
- 🤖 **AI智能提示** - 实时分析棋盘，给出安全格子和地雷位置
- 🎯 **三种难度** - 初级(9x9)、中级(16x16)、高级(16x30)
- ⏱️ **计时功能** - 记录游戏时间
- 💡 **可视化提示** - 绿色高亮安全格子，红色高亮地雷格子
- 🎨 **现代化界面** - 基于Qt6的精美界面

## 🎯 游戏玩法

### 基本规则

1. **左键点击** - 翻开格子
2. **右键点击** - 标记/取消标记地雷
3. **数字** - 表示周围8格中地雷的数量
4. **目标** - 翻开所有非地雷格子即可获胜

### AI提示功能

- 点击 **"💡 AI提示"** 按钮获取智能提示
- 🟢 **绿色高亮** - 确认安全的格子，可以放心点击
- 🔴 **红色高亮** - 确认是地雷的格子，应该标记
- 提示信息面板会显示具体的行列位置

## 🚀 快速开始

### 1. 安装依赖

```bash
pip install -r requirements.txt
```

需要安装的包：
- `PySide6` - Qt6 GUI框架
- `numpy` - 数值计算

### 2. 启动游戏

**方式一：双击启动（最简单）**

Windows:
```bash
双击 start_gui.bat
```

Mac/Linux:
```bash
chmod +x start_gui.sh
./start_gui.sh
```

**方式二：命令行启动**

```bash
python run.py
```

**方式三：VSCode调试**

在VSCode中按 `F5` 键启动

## 🎮 游戏界面

### 主界面布局

```
┌─────────────────────────────────────┐
│      🎮 扫雷游戏 + AI智能提示        │
├─────────────────────────────────────┤
│ 难度: [初级] [新游戏] [AI提示] [清除]│
│ 💣 剩余: 10        ⏱️ 时间: 0       │
├──────────────┬──────────────────────┤
│              │                      │
│  游戏棋盘    │   AI提示信息          │
│              │                      │
│  [格子按钮]  │   • 安全格子列表      │
│              │   • 地雷格子列表      │
│              │                      │
└──────────────┴──────────────────────┘
```

### 控制面板

- **难度选择** - 初级/中级/高级
- **🎯 新游戏** - 开始新的游戏
- **💡 AI提示** - 获取AI智能提示
- **🧹 清除提示** - 清除高亮标记

### 信息显示

- **💣 剩余** - 剩余地雷数量（总数-已标记数）
- **⏱️ 时间** - 游戏用时（秒）

## 💡 使用技巧

### 游戏技巧

1. **从角落开始** - 角落和边缘相对安全
2. **利用数字** - 根据数字推理周围地雷位置
3. **标记确定的地雷** - 右键标记可以帮助推理
4. **逐步推进** - 不要盲目猜测

### AI提示技巧

1. **适时使用** - 当不确定下一步时使用AI提示
2. **翻开更多格子** - 翻开的格子越多，AI提示越准确
3. **优先安全格子** - 先点击AI推荐的安全格子
4. **标记地雷** - 对AI推荐的地雷格子进行标记
5. **清除提示** - 使用提示后可以清除高亮，避免误操作

### 进阶玩法

- **挑战速度** - 尝试在最短时间内完成
- **不使用AI** - 纯靠逻辑推理完成游戏
- **混合模式** - 只在困难时使用AI提示

## 🏗️ 项目架构

### 代码结构

```
src/
├── core/                       # 核心逻辑层
│   ├── minesweeper_game.py    # 扫雷游戏逻辑
│   ├── solver.py              # AI求解器
│   └── board_analyzer.py      # 棋盘分析器
├── gui/                       # GUI界面层
│   ├── game_board.py          # 游戏棋盘界面
│   ├── main_window.py         # 主窗口
│   └── widgets.py             # 自定义组件
└── utils/                     # 工具层
    ├── constants.py           # 常量定义
    └── image_utils.py         # 图像工具
```

### 核心模块

#### MinesweeperGame（游戏逻辑）

负责游戏核心功能：
- 生成地雷（确保第一次点击安全）
- 翻开格子（递归翻开空白区域）
- 标记地雷
- 判断胜负

#### GameBoard（游戏界面）

负责游戏显示：
- 格子按钮网格
- 左键/右键交互
- 视觉效果（颜色、样式）
- 游戏状态更新

#### MinesweeperSolver（AI求解器）

负责智能提示：
- 分析棋盘状态
- 应用扫雷逻辑规则
- 推理安全格子和地雷位置
- 返回提示结果

## 🎯 AI算法原理

### 基本规则

AI使用两条基本推理规则：

**规则1：确定地雷**
```
如果一个数字格子周围的【未知格子数】= 【剩余地雷数】
→ 则所有未知格子都是地雷
```

**规则2：确定安全**
```
如果一个数字格子周围的【已标记地雷数】= 【数字】
→ 则所有未知格子都是安全的
```

### 示例

```
? ? ?     3 ? ?     3 ? ?
? 3 ?  →  ? 3 ?  →  ? 3 ?
? ? ?     ? ? ?     🚩🚩🚩

第一步：数字3周围有3个未知格子和3个地雷
       → 应用规则1：全部都是地雷
       
? ? ?     ✓ ✓ ✓
3 🚩🚩  →  3 🚩🚩
🚩 ? ?     🚩 ? ?

第二步：数字3周围已标记3个地雷
       → 应用规则2：其他格子都安全
```

## 🔧 技术栈

- **Python 3.7+** - 核心语言
- **PySide6** - Qt6 GUI框架
- **NumPy** - 数值计算（棋盘矩阵）

## 📊 难度配置

| 难度 | 尺寸 | 地雷数 | 难度系数 |
|------|------|--------|----------|
| 初级 | 9x9 | 10 | ★☆☆☆☆ |
| 中级 | 16x16 | 40 | ★★★☆☆ |
| 高级 | 16x30 | 99 | ★★★★★ |

## 💻 开发指南

### 添加新难度

编辑 `src/gui/main_window.py`：

```python
self.difficulties = {
  '初级 (9x9)': {'rows': 9, 'cols': 9, 'mines': 10},
  '中级 (16x16)': {'rows': 16, 'cols': 16, 'mines': 40},
  '高级 (16x30)': {'rows': 16, 'cols': 30, 'mines': 99},
  '自定义': {'rows': 20, 'cols': 20, 'mines': 50},  # 新增
}
```

### 自定义样式

修改 `src/gui/game_board.py` 中的样式方法：

```python
def _set_number_style(self, number: int):
  colors = {
    1: '#0000ff',  # 自定义颜色
    # ...
  }
```

### 扩展AI算法

在 `src/core/solver.py` 中添加新的推理规则：

```python
def advanced_solve(self):
  # 实现更高级的推理算法
  # 例如：模式识别、概率计算等
  pass
```

## ⚠️ 注意事项

- ✅ 第一次点击永远是安全的
- ✅ AI提示基于逻辑推理，100%准确
- ✅ 如果AI没有给出提示，说明需要一定运气
- ✅ 标记的地雷数不能超过总地雷数

## 🎓 学习价值

本项目适合：

1. **Python GUI开发学习** - PySide6/Qt应用
2. **游戏逻辑设计** - 递归算法、状态管理
3. **AI算法实践** - 逻辑推理、规则引擎
4. **软件架构设计** - 模块化、MVC模式

## 📈 未来计划

- [ ] 添加更多难度级别
- [ ] 实现自定义棋盘大小
- [ ] 添加游戏统计（胜率、最快时间）
- [ ] 实现撤销功能
- [ ] 添加音效和动画
- [ ] 实现概率分析AI
- [ ] 添加主题切换

## 🤝 贡献

欢迎提交问题和功能建议！

## 📄 许可证

MIT License

## 🙏 致谢

- 感谢经典扫雷游戏的灵感
- 感谢Qt框架提供的强大GUI支持

---

**开始游戏，享受AI辅助的扫雷体验！** 🎮✨

**提示：使用AI提示功能，学习扫雷推理技巧！** 💡🧠


